<Workflow_WorkflowDefinition outputs="&lt;outputs&gt;&#xA;  &lt;exitCode class=&quot;java.lang.String&quot; _list_=&quot;false&quot;&gt;xpath:{/workflow/variables/exitCode}&lt;/exitCode&gt;&#xA;  &lt;message class=&quot;java.lang.String&quot; _list_=&quot;false&quot;&gt;xpath:{/workflow/variables/message}&lt;/message&gt;&#xA;&lt;/outputs&gt;" webHidden="0" isHtmlDescription="0" inputs="&lt;inputs&gt;&#xA;  &lt;operationType class=&quot;java.lang.String&quot; _list_=&quot;false&quot;&gt;Backup&lt;/operationType&gt;&#xA;  &lt;path class=&quot;java.lang.String&quot; _list_=&quot;false&quot;/&gt;&#xA;&lt;/inputs&gt;" interactive="0" description="&lt;html&gt;&lt;p&gt;The workflow is designed for the backup of DocuSign documents to a Commvault S3 Vault. It tracks the last backup time to ensure only new or updated documents are retrieved, reducing redundancy. Backups are stored in S3, and the process automatically updates the timestamp for seamless incremental backups in future runs.&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;It can also list backup content and can restore a backup path from the backup to a local folder on workflow engine machine.&lt;/p&gt;&lt;/html&gt;" manualPercentageComplete="0" apiMode="0" executeOnWeb="0" variables="&lt;variables&gt;&#xA;  &lt;exitCode class=&quot;java.lang.Integer&quot; _list_=&quot;false&quot;/&gt;&#xA;  &lt;message class=&quot;java.lang.String&quot; _list_=&quot;false&quot;/&gt;&#xA;  &lt;isWindows class=&quot;java.lang.Integer&quot; _list_=&quot;false&quot;&gt;0&lt;/isWindows&gt;&#xA;  &lt;isValidInputs class=&quot;java.lang.Boolean&quot; _list_=&quot;false&quot;&gt;true&lt;/isValidInputs&gt;&#xA;&lt;/variables&gt;" revision="$Revision:  $" tags="" modTime="1756360384" uniqueGuid="5beacc90-e05c-40b1-af71-d58c5901da15" name="Backup Docusign Utility" config="&lt;configuration&gt;&#xA;  &lt;privateKey class=&quot;java.lang.String&quot; _list_=&quot;false&quot;/&gt;&#xA;  &lt;configJson class=&quot;java.lang.String&quot; _list_=&quot;false&quot;/&gt;&#xA;&lt;/configuration&gt;" workflowId="0"><schema><outputs className="" type="" name="outputs"><children hidden="0" defaultValue="" className="java.lang.String" type="{http://www.w3.org/2001/XMLSchema}string" listType="0" inputType="java.lang.String" attribute="0" documentation="" readOnly="0" controlType="0" name="exitCode" /><children hidden="0" defaultValue="" className="java.lang.String" type="{http://www.w3.org/2001/XMLSchema}string" listType="0" inputType="java.lang.String" attribute="0" documentation="" readOnly="0" controlType="0" name="message" /></outputs><variables className="" type="" name="variables"><children hidden="0" className="java.lang.Integer" type="{http://www.w3.org/2001/XMLSchema}integer" listType="0" inputType="java.lang.Integer" attribute="0" name="exitCode" /><children hidden="0" className="java.lang.String" type="{http://www.w3.org/2001/XMLSchema}string" listType="0" inputType="java.lang.String" attribute="0" name="message" /><children hidden="0" className="java.lang.Integer" type="{http://www.w3.org/2001/XMLSchema}integer" listType="0" inputType="java.lang.Integer" attribute="0" name="isWindows" /><children className="java.lang.Boolean" type="{http://www.w3.org/2001/XMLSchema}boolean" listType="0" inputType="java.lang.Boolean" name="isValidInputs" /></variables><inputs><children hidden="0" defaultValue="" displayName="Operation Type" className="java.lang.String" type="{http://www.w3.org/2001/XMLSchema}string" listType="0" required="0" minimumValue="" inputType="java.lang.String" attribute="0" documentation="" controlHidden="0" readOnly="0" searchable="0" controlType="2" name="operationType" maximumValue=""><labelsForOptions val="Backup" /><labelsForOptions val="List Backup" /><labelsForOptions val="Restore Locally" /><options val="Backup" /><options val="List" /><options val="Restore" /></children><children hidden="0" defaultValue="" displayName="Path" className="java.lang.String" type="{http://www.w3.org/2001/XMLSchema}string" listType="0" required="0" minimumValue="" inputType="java.lang.String" attribute="0" documentation="" controlHidden="0" readOnly="0" searchable="0" controlType="0" name="path" maximumValue="" /></inputs><config className="" type="" name="configuration"><children hidden="0" displayName="" className="java.lang.String" type="{http://www.w3.org/2001/XMLSchema}string" listType="0" required="0" minimumValue="" inputType="java.lang.String" attribute="0" documentation="" controlHidden="0" readOnly="0" searchable="0" controlType="0" name="privateKey" alignment="0" maximumValue="" /><children hidden="0" displayName="" className="java.lang.String" type="{http://www.w3.org/2001/XMLSchema}string" listType="0" required="0" inputType="java.lang.String" attribute="0" documentation="" controlHidden="0" readOnly="0" searchable="0" controlType="0" name="configJson" alignment="0" /></config></schema><Start displayName="Start" interactive="0" originalStyle="" jobMode="0" description="" waitSetting="0" continueOnFailure="0" namespaceUri="commvault.cte.workflow.activities" commented="0" height="36" created="0" uniqueName="Start_1" skipAttempt="0" name="Start" width="55" x="45" y="41" style="image;image=/images/jgraphx/house.png"><inputs val="&lt;inputs/&gt;" /><transition sourceX="72" sourceY="59" activity="Script_6" targetY="56" targetX="178" originalStyle="" description="" points="78,89" x="0" y="0" transitionIndex="0" style="defaultEdge" value="ANY" commented="0" status="0" /></Start><Activity maxRestarts="0" displayName="Python3 Available?" interactive="0" originalStyle="" jobMode="0" description="Execute a script on a remote machine" waitSetting="0" continueOnFailure="0" namespaceUri="commvault.cte.workflow.activities" commented="0" height="25" created="1755510637092" uniqueName="ExecuteScript_1" skipAttempt="0" name="ExecuteScript" width="137" x="272" y="42" style="label;image=commvault.cte.workflow.activities.ExecuteScript"><inputs val="&lt;inputs&gt;&#xA;  &lt;script&gt;Write-Host &quot;Checking for Python 3 and pip3...&quot;&#xA;&#xA;# Function to check command existence&#xA;function Test-Command($cmd) {&#xA;    $null -ne (Get-Command $cmd -ErrorAction SilentlyContinue)&#xA;}&#xA;&#xA;$pythonOK = $false&#xA;$pipOK    = $false&#xA;&#xA;# ---- Check Python 3 ----&#xA;if (Test-Command &quot;python3&quot;) {&#xA;    $ver = python3 --version 2&amp;gt;&amp;amp;1&#xA;    Write-Host &quot;python3 found: $ver&quot;&#xA;&#xA;    if ($ver -match &quot;Python 3\.\d+&quot;) {&#xA;        $pythonOK = $true&#xA;    } else {&#xA;        Write-Host &quot;Found python3 but version is not 3.x&quot;&#xA;    }&#xA;} elseif (Test-Command &quot;python&quot;) {&#xA;    $ver = python --version 2&amp;gt;&amp;amp;1&#xA;    Write-Host &quot;python found: $ver&quot;&#xA;&#xA;    if ($ver -match &quot;Python 3\.\d+&quot;) {&#xA;        $pythonOK = $true&#xA;    } else {&#xA;        Write-Host &quot;python exists but it&#x2019;s not Python 3&quot;&#xA;    }&#xA;} else {&#xA;    Write-Host &quot;Python 3 is not installed&quot;&#xA;}&#xA;&#xA;# ---- Check pip3 ----&#xA;if (Test-Command &quot;pip3&quot;) {&#xA;    $ver = pip3 --version 2&amp;gt;&amp;amp;1&#xA;    Write-Host &quot;pip3 found: $ver&quot;&#xA;    $pipOK = $true&#xA;} elseif (Test-Command &quot;pip&quot;) {&#xA;    $ver = pip --version 2&amp;gt;&amp;amp;1&#xA;    Write-Host &quot;pip found: $ver&quot;&#xA;    if ($ver -match &quot;python 3\.\d+&quot;) {&#xA;        $pipOK = $true&#xA;    } else {&#xA;        Write-Host &quot;pip exists but tied to non-Python3&quot;&#xA;    }&#xA;} else {&#xA;    Write-Host &quot;pip3 is not installed&quot;&#xA;}&#xA;&#xA;# ---- Exit code ----&#xA;if ($pythonOK -and $pipOK) {&#xA;    Write-Host &quot;Python 3 and pip3 are installed&quot;&#xA;    exit 0&#xA;} else {&#xA;    Write-Host &quot;Python 3 or pip3 missing&quot;&#xA;    exit 1&#xA;}&#xA;&lt;/script&gt;&#xA;  &lt;scriptType&gt;PowerShell&lt;/scriptType&gt;&#xA;&lt;/inputs&gt;" /><onExit language="3" script="var exitcode = xpath:{/workflow/ExecuteScript_1/exitCode};&#xA;if(exitcode == 0){&#xA;&#x9;workflow.setVariable(&quot;exitCode&quot;, 0);&#xA;}else{&#xA;  &#x9;workflow.setVariable(&quot;exitCode&quot;, 1);&#xA;&#x9;workflow.setVariable(&quot;message&quot;, xpath:{/workflow/ExecuteScript_1/commandOutput});&#xA;&#xA;}&#xA;&#xA;" /><transition sourceX="258" sourceY="69" activity="ReleaseLock_1" displayName="No" targetY="163" targetX="258" originalStyle="" description="" points="" x="0" y="0" transitionIndex="0" style="defaultEdge" value="ANY" commented="0" status="0"><condition language="3" script="/*&#xA;The expression should return a boolean. Use the variable name &quot;activity&quot; to refer to the previous activity object. Example:&#xA;activity.exitCode==0;&#xA;*/&#xA;xpath:{/workflow/ExecuteScript_1/exitCode} == 1;" /></transition><transition sourceX="305" sourceY="54" activity="ExecuteProcessBlock_1" displayName="Yes" targetY="119" targetX="463" originalStyle="" description="" points="468,53" x="0" y="0" transitionIndex="0" style="defaultEdge" value="ANY" commented="0" status="0"><condition script="xpath:{/workflow/ExecuteScript_1/exitCode} == 0;" /></transition></Activity><Activity displayName="WorkflowEnd" interactive="0" originalStyle="" jobMode="0" description="Ends the workflow" waitSetting="0" continueOnFailure="0" namespaceUri="commvault.cte.workflow.activities" commented="0" height="27" created="1755512827384" uniqueName="WorkflowEnd_1" skipAttempt="0" name="WorkflowEnd" width="108" x="279" y="245" style="label;image=commvault.cte.workflow.activities.EndActivity"><inputs val="&lt;inputs&gt;&#xA;  &lt;completionStatus class=&quot;workflow.types.WorkflowCompletionStatus&quot; _list_=&quot;false&quot;/&gt;&#xA;  &lt;failureMessage class=&quot;java.lang.String&quot; _list_=&quot;false&quot;/&gt;&#xA;&lt;/inputs&gt;" /><outputs outputs="&lt;outputs&gt;&#xA;  &lt;exitCode&gt;xpath:{/workflow/variables/exitCode}&lt;/exitCode&gt;&#xA;  &lt;message&gt;xpath:{/workflow/variables/message}&lt;/message&gt;&#xA;&lt;/outputs&gt;" /></Activity><Activity displayName="AcquireLock" interactive="0" originalStyle="" jobMode="0" description="synchronizes a workflow per named parameter" waitSetting="0" continueOnFailure="0" namespaceUri="commvault.cte.workflow.activities" commented="0" height="23" created="1755597745277" uniqueName="AcquireLock_1" skipAttempt="0" name="AcquireLock" width="102" x="135" y="45" style="label;image=commvault.cte.workflow.activities.LockAcquireActivity"><inputs val="&lt;inputs&gt;&#xA;  &lt;name class=&quot;java.lang.String&quot; _list_=&quot;false&quot;&gt;xpath:{/workflow/system/workflow/workflowName}&lt;/name&gt;&#xA;  &lt;releaseLockOnCompletion class=&quot;java.lang.Boolean&quot; _list_=&quot;false&quot;&gt;true&lt;/releaseLockOnCompletion&gt;&#xA;  &lt;timeout class=&quot;java.lang.Integer&quot; _list_=&quot;false&quot;/&gt;&#xA;&lt;/inputs&gt;" /><transition sourceX="178" sourceY="56" activity="Script_4" targetY="106" targetX="177" originalStyle="" description="" points="" x="0" y="0" transitionIndex="0" style="defaultEdge" value="ANY" commented="0" status="0" /></Activity><Activity displayName="ReleaseLock" interactive="0" originalStyle="" jobMode="0" description="releases the lock for the named parameter" waitSetting="0" continueOnFailure="0" namespaceUri="commvault.cte.workflow.activities" commented="0" height="22" created="1755597814236" uniqueName="ReleaseLock_1" skipAttempt="0" name="ReleaseLock" width="104" x="276" y="126" style="label;image=commvault.cte.workflow.activities.LockReleaseActivity"><inputs val="&lt;inputs&gt;&#xA;  &lt;name class=&quot;java.lang.String&quot; _list_=&quot;false&quot;&gt;xpath:{/workflow/system/workflow/workflowName}&lt;/name&gt;&#xA;&lt;/inputs&gt;" /><transition sourceX="308" sourceY="121" activity="WorkflowEnd_1" targetY="175" targetX="325" originalStyle="" description="" points="" x="0" y="0" transitionIndex="0" style="defaultEdge" value="ANY" commented="0" status="0" /></Activity><Activity maxRestarts="0" displayName="Is Windows" interactive="0" originalStyle="" jobMode="0" description="activity to execute code snippets in the selected language" waitSetting="0" continueOnFailure="0" namespaceUri="commvault.cte.workflow.activities" commented="0" height="21" created="1756102342592" uniqueName="Script_4" skipAttempt="0" name="Script" width="96" x="138" y="106" style="label;image=commvault.cte.workflow.activities.ScriptActivity"><inputs val="&lt;inputs&gt;&#xA;  &lt;script language=&quot;4&quot; script=&quot;String os = System.getProperty(&amp;quot;os.name&amp;quot;).toLowerCase();&amp;#xA;int isWindows = 0;&amp;#xA;if (os.contains(&amp;quot;win&amp;quot;)) {&amp;#xA;  logger.info(&amp;quot;Running on Windows&amp;quot;);&amp;#xA;  isWindows = 1;&amp;#xA;} else if (os.contains(&amp;quot;nix&amp;quot;) || os.contains(&amp;quot;nux&amp;quot;) || os.contains(&amp;quot;aix&amp;quot;)) {&amp;#xA;  logger.info(&amp;quot;Running on Linux&amp;quot;);&amp;#xA;} else if (os.contains(&amp;quot;mac&amp;quot;)) {&amp;#xA;  logger.info(&amp;quot;Running on macOS&amp;quot;);&amp;#xA;} else {&amp;#xA;  logger.info(&amp;quot;Running on &amp;quot; + os);&amp;#xA;}&amp;#xA;workflow.setVariable(&amp;quot;isWindows&amp;quot;, isWindows);&amp;#xA;return isWindows;&quot;/&gt;&#xA;&lt;/inputs&gt;" /><transition sourceX="177" sourceY="106" activity="ExecuteScript_1" displayName="Windows" targetY="54" targetX="305" originalStyle="" description="" points="" x="0" y="0" transitionIndex="0" style="defaultEdge" value="ANY" commented="0" status="0"><condition script="xpath:{/workflow/Script_4/output} == 1;" /></transition><transition sourceX="177" sourceY="106" activity="ExecuteScript_4" displayName="Linux" targetY="174" targetX="187" originalStyle="" description="" points="" x="0" y="0" transitionIndex="0" style="defaultEdge" value="ANY" commented="0" status="0"><condition script="xpath:{/workflow/Script_4/output} == 0;" /></transition></Activity><Activity displayName="Python3 Available?" interactive="0" originalStyle="" jobMode="0" description="Execute a script on a remote machine" waitSetting="0" continueOnFailure="0" namespaceUri="commvault.cte.workflow.activities" commented="0" height="25" created="1756102643525" uniqueName="ExecuteScript_4" skipAttempt="0" name="ExecuteScript" width="137" x="115" y="186" style="label;image=commvault.cte.workflow.activities.ExecuteScript"><inputs val="&lt;inputs&gt;&#xA;  &lt;script&gt;#!/bin/bash&#xA;&#xA;# Check if python3 exists&#xA;if command -v python3 &amp;amp;&amp;gt;/dev/null; then&#xA;    echo &quot;Python 3 is installed: $(python3 --version)&quot;&#xA;    exit 0&#xA;else&#xA;    echo &quot;Python 3 is not installed.&quot;&#xA;    exit 1&#xA;fi&#xA;&lt;/script&gt;&#xA;  &lt;scriptType&gt;UnixShell&lt;/scriptType&gt;&#xA;&lt;/inputs&gt;" /><onExit language="3" script="var exitcode = xpath:{/workflow/ExecuteScript_4/exitCode};&#xA;if(exitcode == 0){&#xA;&#x9;workflow.setVariable(&quot;exitCode&quot;, 0);&#xA;}else{&#xA;  &#x9;workflow.setVariable(&quot;exitCode&quot;, 1);&#xA;&#x9;workflow.setVariable(&quot;message&quot;, xpath:{/workflow/ExecuteScript_1/commandOutput});&#xA;&#xA;}&#xA;&#xA;" /><transition sourceX="187" sourceY="174" activity="ReleaseLock_1" displayName="No" targetY="121" targetX="308" originalStyle="" description="" points="236,177" x="0" y="0" transitionIndex="0" style="defaultEdge" value="ANY" commented="0" status="0"><condition script="xpath:{/workflow/ExecuteScript_4/exitCode} == 1;" /></transition><transition sourceX="187" sourceY="174" activity="ExecuteProcessBlock_1" displayName="Yes" targetY="119" targetX="463" originalStyle="" description="" points="452,200" x="0" y="0" transitionIndex="0" style="defaultEdge" value="ANY" commented="0" status="0"><condition script="xpath:{/workflow/ExecuteScript_4/exitCode} == 0;" /></transition></Activity><Activity maxRestarts="0" displayName="Install required lib and process" interactive="0" originalStyle="" jobMode="0" description="creates a super process group" waitSetting="0" continueOnFailure="0" namespaceUri="commvault.cte.workflow.activities" commented="0" height="185" created="1756103171107" uniqueName="ProcessBlock_1" skipAttempt="0" name="ProcessBlock" width="430" x="566" y="62" style="swimlane"><inputs val="&lt;inputs&gt;&#xA;  &lt;inputs&gt;&#xA;    &lt;inputs/&gt;&#xA;    &lt;option/&gt;&#xA;  &lt;/inputs&gt;&#xA;&lt;/inputs&gt;" /><superProcess><Start displayName="Start" interactive="0" originalStyle="" jobMode="0" description="" waitSetting="0" continueOnFailure="0" namespaceUri="commvault.cte.workflow.activities" commented="0" height="40" created="1756103171111" uniqueName="Start_2" skipAttempt="0" name="Start" width="60" x="10" y="37" style="label;fillColor=#FFFF33;gradientColor=#FFFF00"><inputs val="&lt;inputs/&gt;" /><transition sourceX="40" sourceY="57" activity="ExecuteScript_2" targetY="57" targetX="100" originalStyle="" description="" points="" x="0" y="0" transitionIndex="0" style="defaultEdge" value="ANY" commented="0" status="0" /></Start><Activity maxRestarts="0" displayName="Install Required Lib" interactive="0" originalStyle="" jobMode="0" description="Execute a script on a remote machine" waitSetting="0" continueOnFailure="0" namespaceUri="commvault.cte.workflow.activities" commented="0" height="25" created="1755510797959" uniqueName="ExecuteScript_2" skipAttempt="0" name="ExecuteScript" width="138" x="83" y="45" style="label;image=commvault.cte.workflow.activities.ExecuteScript"><inputs val="&lt;inputs&gt;&#xA;  &lt;script&gt;import importlib&#xA;import subprocess&#xA;import sys&#xA;&#xA;# List of required packages&#xA;REQUIRED_LIBS = [&#xA;    &quot;boto3&quot;, &quot;requests&quot;, &quot;PyJWT&quot;, &quot;PyYAML&quot;, &quot;cryptography&quot;&#xA;]&#xA;&#xA;def install_package(package):&#xA;    &quot;&quot;&quot;Install package using pip&quot;&quot;&quot;&#xA;    try:&#xA;        subprocess.check_call([sys.executable, &quot;-m&quot;, &quot;pip&quot;, &quot;install&quot;, package])&#xA;    except subprocess.CalledProcessError as e:&#xA;        print(f&quot;Failed to install {package}: {e}&quot;)&#xA;        sys.exit(1)&#xA;&#xA;def ensure_packages():&#xA;    &quot;&quot;&quot;Ensure all required packages are installed&quot;&quot;&quot;&#xA;    for lib in REQUIRED_LIBS:&#xA;        try:&#xA;            importlib.import_module(lib)&#xA;            print(f&quot;{lib} already installed&quot;)&#xA;        except ImportError:&#xA;            print(f&quot;Installing {lib} ...&quot;)&#xA;            install_package(lib)&#xA;&#xA;&#xA;ensure_packages()&#xA;print(&quot;All required packages are installed.&quot;)&#xA;sys.exit(0)&lt;/script&gt;&#xA;  &lt;scriptType&gt;Python&lt;/scriptType&gt;&#xA;&lt;/inputs&gt;" /><onExit language="3" script="var exitcode = xpath:{/workflow/ExecuteScript_2/exitCode};&#xA;if(exitcode == 0){&#xA;&#x9;workflow.setVariable(&quot;exitCode&quot;, 0);&#xA;}else{&#xA;  &#x9;workflow.setVariable(&quot;exitCode&quot;, 2);&#xA;&#x9;workflow.setVariable(&quot;message&quot;, xpath:{/workflow/ExecuteScript_2/commandOutput});&#xA;&#xA;}&#xA;&#xA;" /><transition sourceX="100" sourceY="57" activity="Break_1" displayName="Falied" targetY="55" targetX="331" originalStyle="" description="" points="" x="0" y="0" transitionIndex="0" style="defaultEdge" value="ANY" commented="0" status="0"><condition script="xpath:{/workflow/ExecuteScript_2/exitCode} == 1;" /></transition><transition sourceX="100" sourceY="57" activity="ExecuteScript_3" displayName="All Installed" targetY="123" targetX="158" originalStyle="" description="" points="" x="0" y="0" transitionIndex="0" style="defaultEdge" value="ANY" commented="0" status="0"><condition script="xpath:{/workflow/ExecuteScript_2/exitCode} == 0;" /></transition></Activity><Activity maxRestarts="0" displayName="Run Operation" interactive="0" originalStyle="" jobMode="0" description="Execute a script on a remote machine" timeout="0" waitSetting="0" continueOnFailure="0" namespaceUri="commvault.cte.workflow.activities" commented="0" height="25" created="1755527270431" uniqueName="ExecuteScript_3" skipAttempt="0" name="ExecuteScript" width="124" x="109" y="125" style="label;image=commvault.cte.workflow.activities.ExecuteScript"><inputs val="&lt;inputs&gt;&#xA;  &lt;scriptType&gt;Python&lt;/scriptType&gt;&#xA;  &lt;script&gt;import importlib&#xA;import boto3&#xA;import logging&#xA;import requests&#xA;import yaml&#xA;import mimetypes&#xA;import os&#xA;from pathlib import Path&#xA;import argparse&#xA;from datetime import datetime, timedelta, UTC&#xA;from botocore.exceptions import ClientError&#xA;from urllib.parse import urlencode&#xA;import jwt&#xA;import tempfile&#xA;import sys&#xA;import json&#xA;&#xA;# Ensure logs directory exists&#xA;isWindows = xpath:{/workflow/variables/isWindows}&#xA;script_directory = os.path.dirname(os.path.abspath(__file__))&#xA;if(isWindows == 1):&#xA;&#x9;log_directory = os.path.join(script_directory, &quot;../../Log Files&quot;)&#xA;else:&#xA;&#x9;log_directory = os.path.join(&quot;/var/log/commvault/&quot;, &quot;Log_Files&quot;)&#xA;print(f&quot;Logs will be saved in {log_directory} folder, docusign_backup.log file.&quot;)&#xA;os.makedirs(log_directory, exist_ok=True)&#xA;&#xA;# Setup logger to file and console&#xA;logging.basicConfig(&#xA;    level=logging.INFO,&#xA;    format=&quot;%(asctime)s [%(levelname)s] %(name)s: %(message)s&quot;,&#xA;    handlers=[&#xA;        logging.FileHandler(os.path.join(log_directory, &quot;docusign_backup.log&quot;), encoding=&quot;utf-8&quot;),&#xA;        #logging.StreamHandler()  # also log to console&#xA;    ]&#xA;)&#xA;&#xA;logger = logging.getLogger(&quot;docusign_backup&quot;)&#xA;&#xA;&#xA;required_packages = [&#xA;    &quot;boto3&quot;,&#xA;    &quot;requests&quot;,&#xA;    &quot;jwt&quot;,      # PyJWT&#xA;    &quot;yaml&quot;      # PyYAML&#xA;]&#xA;&#xA;missing = []&#xA;&#xA;for package in required_packages:&#xA;    try:&#xA;        importlib.import_module(package)&#xA;    except ImportError:&#xA;        missing.append(package)&#xA;&#xA;if missing:&#xA;    logger.exception(f&quot;Missing required libraries: {', '.join(missing)}&quot;)&#xA;    logger.info(&quot;Run: pip install -r requirements.txt&quot;)&#xA;    sys.exit(1)&#xA;&#xA;LAST_RUN_KEY = 'docusign-backup/last-run.txt'&#xA;&#xA;&#xA;def load_config(path):&#xA;    with open(path) as f:&#xA;        return yaml.safe_load(f)&#xA;&#xA;def load_config_from_json(json_str):&#xA;    try:&#xA;        return json.loads(json_str)&#xA;    except json.JSONDecodeError as e:&#xA;        logger.exception(f&quot;Invalid JSON input: {e}&quot;)&#xA;&#xA;&#xA;def get_s3_client(config):&#xA;    try:&#xA;        return boto3.client(&#xA;            's3',&#xA;            endpoint_url=config['aws']['endpoint'],&#xA;            region_name=config['aws']['region'],&#xA;            aws_access_key_id=config['aws']['accessKeyId'],&#xA;            aws_secret_access_key=config['aws']['secretAccessKey'],&#xA;            config=boto3.session.Config(s3={'addressing_style': 'path'})&#xA;        )&#xA;    except KeyError as e:&#xA;        logger.exception(f&quot;Missing AWS config key: {e}. Please check your configuration file.&quot;)&#xA;        raise&#xA;&#xA;def get_docusign_auth_server(docu_config):&#xA;    try:&#xA;        return docu_config['authServer']&#xA;    except KeyError:&#xA;        logger.exception(&quot;Missing 'authServer' in DocuSign config. Please check your configuration file.&quot;)&#xA;        raise&#xA;&#xA;def get_access_token(config):&#xA;    try:&#xA;        docu_config = config['docusign']&#xA;        #with open(docu_config['privateKeyPath'], 'r') as f:&#xA;        #    private_key = f.read()&#xA;        private_key = r&quot;&quot;&quot;xpath:{/workflow/configuration/privateKey}&quot;&quot;&quot;&#xA;    except Exception as e:&#xA;        logger.exception(f&quot;Failed to read private key from workflow configuration privateKey, exception: {e}&quot;)&#xA;        raise&#xA;    now = int(datetime.now(UTC).timestamp())&#xA;    try:&#xA;        authserver = get_docusign_auth_server(docu_config)&#xA;        payload = {&#xA;            'iss': docu_config['integrationKey'],&#xA;            'sub': docu_config['userId'],&#xA;            'aud': authserver,&#xA;            'iat': now,&#xA;            'exp': now + 120,&#xA;            'scope': docu_config['scopes']&#xA;        }&#xA;        assertion = jwt.encode(payload, private_key, algorithm='RS256')&#xA;        headers = {'Content-Type': 'application/x-www-form-urlencoded'}&#xA;        body = urlencode({&#xA;            'grant_type': 'urn:ietf:params:oauth:grant-type:jwt-bearer',&#xA;            'assertion': assertion&#xA;        })&#xA;        &#xA;    except KeyError as e:&#xA;        logger.exception(f&quot;Missing DocuSign config key: {e}. Please check your configuration file.&quot;)&#xA;        raise&#xA;    url = f&quot;https://{authserver}/oauth/token&quot;&#xA;    res = requests.post(url, headers=headers, data=body)&#xA;    res.raise_for_status()&#xA;    return res.json()['access_token']&#xA;&#xA;&#xA;def get_user_info(config, token):&#xA;    headers = {'Authorization': f'Bearer {token}'}&#xA;    res = requests.get(f&quot;https://{get_docusign_auth_server(config['docusign'])}/oauth/userinfo&quot;, headers=headers)&#xA;    res.raise_for_status()&#xA;    return res.json()['accounts'][0]&#xA;&#xA;&#xA;def list_completed_envelopes(config, account_id, token, from_date):&#xA;    url = f&quot;{get_base_path(config)}/v2.1/accounts/{account_id}/envelopes?from_date={from_date}&amp;amp;status=completed&quot;&#xA;    headers = {'Authorization': f'Bearer {token}'}&#xA;    res = requests.get(url, headers=headers)&#xA;    res.raise_for_status()&#xA;    return res.json().get('envelopes', [])&#xA;&#xA;&#xA;def download_large_document(config, account_id, envelope_id, document_id, token):&#xA;    doc_url = f&quot;{get_base_path(config)}/v2.1/accounts/{account_id}/envelopes/{envelope_id}/documents/{document_id}&quot;&#xA;    headers = {'Authorization': f'Bearer {token}'}&#xA;    temp_stream = None&#xA;    try:&#xA;        temp_stream = download_to_tempfile(doc_url, headers)&#xA;        return temp_stream&#xA;    except Exception as e:&#xA;        if temp_stream:&#xA;            temp_stream.close()&#xA;        logger.exception(f&quot;Failed to download document {document_id} from envelope {envelope_id}&quot;)&#xA;        raise&#xA;def get_envelope_metadata(config, account_id, envelope_id, token):&#xA;    url = f&quot;{get_base_path(config)}/v2.1/accounts/{account_id}/envelopes/{envelope_id}&quot;&#xA;    headers = {'Authorization': f'Bearer {token}'}&#xA;    res = requests.get(url, headers=headers)&#xA;    res.raise_for_status()&#xA;    return res.json()&#xA;&#xA;def get_base_path(config):&#xA;    try:&#xA;        return config['docusign']['basePath']&#xA;    except KeyError:&#xA;        logger.exception(&quot;Missing 'basePath' in DocuSign config. Please check your configuration file.&quot;)&#xA;        raise&#xA;&#xA;def get_envelope_documents(config, account_id, envelope_id, token):&#xA;    url = f&quot;{get_base_path(config)}/v2.1/accounts/{account_id}/envelopes/{envelope_id}/documents&quot;&#xA;    headers = {'Authorization': f'Bearer {token}'}&#xA;    res = requests.get(url, headers=headers)&#xA;    res.raise_for_status()&#xA;    return res.json().get('envelopeDocuments', [])&#xA;&#xA;&#xA;def upload_to_s3(s3, bucket, key, body, content_type, is_stream=False):&#xA;    try:&#xA;        if is_stream:&#xA;            s3.upload_fileobj(body, bucket, key, ExtraArgs={'ContentType': content_type})&#xA;        else:&#xA;            s3.put_object(Bucket=bucket, Key=key, Body=body, ContentType=content_type)&#xA;        logger.info(f&quot;Uploaded: {key}&quot;)&#xA;    except Exception as e:&#xA;        logger.exception(f&quot;Failed to upload {key} to S3&quot;)&#xA;        raise&#xA;&#xA;&#xA;def get_last_run_timestamp(s3, bucket, config):&#xA;    try:&#xA;        obj = s3.get_object(Bucket=bucket, Key=LAST_RUN_KEY)&#xA;        return obj['Body'].read().decode().strip()&#xA;    except ClientError:&#xA;        if config.get('fromDate'):&#xA;            logger.info(f&quot;Using configured fromDate: {config['fromDate']}&quot;)&#xA;            return config['fromDate']&#xA;        else:&#xA;            default_date = datetime.now(UTC) - timedelta(days=7)&#xA;            default_date = default_date.replace(microsecond=0).strftime(&quot;%Y-%m-%dT%H:%M:%S&quot;)&#xA;            logger.info(f&quot;No previous timestamp found. Using default: 7 days ago {default_date}&quot;)&#xA;            return default_date&#xA;&#xA;&#xA;def save_backup_timestamp(s3, bucket, ts):&#xA;    logger.info(f&quot;Saving last run time to {LAST_RUN_KEY} on S3&quot;)&#xA;    s3.put_object(Bucket=bucket, Key=LAST_RUN_KEY, Body=ts.encode(), ContentType='text/plain')&#xA;&#xA;&#xA;def determine_content_type(filename):&#xA;    content_type, _ = mimetypes.guess_type(filename)&#xA;    return content_type or 'application/octet-stream'&#xA;&#xA;def download_to_tempfile(url, headers):&#xA;    response = requests.get(url, headers=headers, stream=True)&#xA;    response.raise_for_status()&#xA;    temp_file = None&#xA;    try:&#xA;        temp_file = tempfile.NamedTemporaryFile(delete=True)&#xA;        for chunk in response.iter_content(chunk_size=8192):&#xA;            if chunk:  # filter out keep-alive chunks&#xA;                temp_file.write(chunk)&#xA;        temp_file.seek(0)&#xA;        return temp_file&#xA;    except Exception:&#xA;        if temp_file:&#xA;            temp_file.close()&#xA;        raise&#xA;&#xA;def run_backup(config, bucket):&#xA;    try:&#xA;        logger.info(&quot;----- Starting Backup -----&quot;)&#xA;        print(&quot;Backup Summary:&quot;)&#xA;        s3 = get_s3_client(config)&#xA;        token = get_access_token(config)&#xA;        account = get_user_info(config, token)&#xA;        from_date = get_last_run_timestamp(s3, bucket, config)&#xA;        logger.info(f&quot;From S3, we get last backup run time: {from_date}, will get completed envelops from docusign.&quot;)&#xA;        print(f&quot;From S3, we get last backup run time: {from_date}, will get completed envelops from docusign.&quot;)&#xA;        envelopes = list_completed_envelopes(config, account['account_id'], token, from_date)&#xA;        now_str = datetime.now(UTC).strftime(&quot;%Y-%m-%dT%H:%M:%SZ&quot;)&#xA;        today = now_str.split(&quot;T&quot;)[0]&#xA;        if not envelopes:&#xA;            logger.info(&quot;There are no completed envelopes found for backup.&quot;)&#xA;            print(&quot;There are no completed envelopes found for backup.&quot;)&#xA;        else:&#xA;            for env in envelopes:&#xA;                eid = env['envelopeId']&#xA;                logger.info(f&quot;Processing envelop: [{eid}].&quot;)&#xA;                try:&#xA;                    meta = get_envelope_metadata(config, account['account_id'], eid, token)&#xA;                    logger.info(f&quot;Uploading metadata.json to s3 with key {today}/{eid}/metadata.json.&quot;)&#xA;                    print(f&quot;Uploading metadata.json to s3 with key {today}/{eid}/metadata.json.&quot;)&#xA;                    upload_to_s3(s3, bucket, f&quot;{today}/{eid}/metadata.json&quot;, yaml.dump(meta).encode(), &quot;application/json&quot;)&#xA;                    logger.info(f&quot;Getting docusign documents for envelop: [{eid}].&quot;)&#xA;                    docs = get_envelope_documents(config, account['account_id'], eid, token)&#xA;                    for doc in docs:&#xA;                        name = doc['name']&#xA;                        logger.info(f&quot;Processing document: [{name}].&quot;)&#xA;                        stream = None&#xA;                        try:&#xA;                            logger.info(f&quot;Downloading document from docusign with id: [{doc['documentId']}].&quot;)&#xA;                            stream = download_large_document(config, account['account_id'], eid, doc['documentId'], token)&#xA;                            content_type = determine_content_type(name)&#xA;                            logger.info(f&quot;Uploading document to s3 with key {today}/{eid}/{name}.&quot;)&#xA;                            upload_to_s3(s3, bucket, f&quot;{today}/{eid}/{name}&quot;, stream, content_type, is_stream=True)&#xA;                            print(f&quot;Uploaded document to s3 with key {today}/{eid}/{name}.&quot;)&#xA;                            if stream:&#xA;                                stream.close()&#xA;                        except Exception as e:&#xA;                            if stream:&#xA;                                stream.close()&#xA;                            logger.error(f&quot;Unable to backup document {name} in envelope {eid} due to error: {e}. Throwing error.&quot;)&#xA;                            print(f&quot;Error: Unable to backup document {name} in envelope {eid} due to error: {e}. Throwing error.&quot;)&#xA;                            raise&#xA;                except Exception as e:&#xA;                    logger.error(f&quot;Failed to process envelope {eid}: {e}&quot;)&#xA;                    print(f&quot;Error: Failed to process envelope {eid} due to error: {e}. Throwing error.&quot;)&#xA;                    raise&#xA;        logger.info(f&quot;Saving backup run time: [{now_str}] to S3.&quot;)&#xA;        save_backup_timestamp(s3, bucket, now_str)&#xA;        logger.info(&quot;Backup completed.&quot;)&#xA;        print(&quot;Backup completed.&quot;)&#xA;&#xA;    except Exception as e:&#xA;        logger.exception(&quot;Backup process failed.&quot;)&#xA;        print(&quot;Backup process failed.&quot;)&#xA;        raise&#xA;&#xA;def list_backups(config, bucket, prefix=&quot;&quot;):&#xA;    &quot;&quot;&quot;&#xA;    Lists all backup folders and files on or after a given date (YYYY-MM-DD).&#xA;    &quot;&quot;&quot;&#xA;    logger.info(&quot;----- Starting List Backup -----&quot;)&#xA;    &#xA;    s3 = get_s3_client(config)&#xA;&#xA;    if prefix and not prefix.endswith(&quot;/&quot;):&#xA;        prefix += &quot;/&quot;&#xA;&#xA;    paginator = s3.get_paginator(&quot;list_objects_v2&quot;)&#xA;    operation_params = {&#xA;        &quot;Bucket&quot;: bucket,&#xA;        &quot;Prefix&quot;: prefix,&#xA;        &quot;Delimiter&quot;: &quot;/&quot;&#xA;    }&#xA;&#xA;    logger.info(f&quot;Listing backup folders from: [{prefix}], bucket: [{bucket}]&quot;)&#xA;&#xA;    found = False&#xA;    valid_folders = []&#xA;&#xA;    for page in paginator.paginate(**operation_params):&#xA;        if &quot;CommonPrefixes&quot; in page:&#xA;            #print(f&quot;Common Prefixes {str(page['CommonPrefixes'])}&quot;)&#xA;            for cp in page[&quot;CommonPrefixes&quot;]:&#xA;                folder = cp[&quot;Prefix&quot;].rstrip(&quot;/&quot;)&#xA;                valid_folders.append(folder)&#xA;    &#xA;    if not valid_folders:&#xA;        #print(&quot;No matching backups found.&quot;)&#xA;        logger.info(&quot;No matching backups found.&quot;)&#xA;        return&#xA;&#xA;    for folder in sorted(valid_folders):&#xA;        #print(f&quot;{folder}&quot;)&#xA;        logger.info(f&quot;{folder}&quot;)&#xA;&#xA;        # List contents inside the folder&#xA;        inner_params = {&#xA;            &quot;Bucket&quot;: bucket,&#xA;            &quot;Prefix&quot;: folder + &quot;/&quot;&#xA;        }&#xA;        for subpage in paginator.paginate(**inner_params):&#xA;            if &quot;Contents&quot; in subpage:&#xA;                for obj in subpage[&quot;Contents&quot;]:&#xA;                    if not obj[&quot;Key&quot;].endswith(&quot;/&quot;):&#xA;                        #print(f&quot;   |___{obj['Key'].split(folder + '/')[1]}&quot;)&#xA;                        logger.info(f&quot;   |___ {obj['Key']}&quot;)&#xA;&#xA;    logger.info(&quot;----- END List Backup -----&quot;)&#xA;&#xA;def restore_backup(config, bucket, prefix):&#xA;    logger.info(&quot;----- Starting Restore From Backup -----&quot;)&#xA;    download_root = &quot;docusign-restores&quot;&#xA;    logger.info(f&quot;Files will be restored to {script_directory}/{download_root}/ directory.&quot;)&#xA;    print(f&quot;Files will be restored to {script_directory}/{download_root}/ directory.&quot;)&#xA;    try:&#xA;        s3 = get_s3_client(config)&#xA;        paginator = s3.get_paginator(&quot;list_objects_v2&quot;)&#xA;        logger.info(f&quot;Restoring backup from: {prefix or 'beginning'}&quot;)&#xA;        print(f&quot;Restoring backup from: {prefix or 'beginning'}&quot;)&#xA;&#xA;        for page in paginator.paginate(Bucket=bucket, Prefix=prefix):&#xA;            for obj in page.get(&quot;Contents&quot;, []):&#xA;                key = obj[&quot;Key&quot;]&#xA;&#xA;                # Build relative path under 'docusign-restores/' based on full key&#xA;                local_path = os.path.join(script_directory, download_root, *key.split('/'))&#xA;                absPath = os.path.realpath(local_path)&#xA;&#xA;                # Ensure folders exist, not including the filename&#xA;                os.makedirs(os.path.dirname(local_path), exist_ok=True)&#xA;                # Download file&#xA;                with open(local_path, &quot;wb&quot;) as f:&#xA;                    body = s3.get_object(Bucket=bucket, Key=key)[&quot;Body&quot;].read()&#xA;                    f.write(body)&#xA;&#xA;                logger.info(f&quot;Restored: {key} --&amp;gt; {absPath}&quot;)&#xA;                print(f&quot;Restored: {key} --&amp;gt; {absPath}&quot;)&#xA;    except Exception as e:&#xA;        logger.exception(f&quot;Exception while restore from  {prefix}: {e}&quot;)&#xA;        print(f&quot;Exception while restore from  {prefix}: {e}&quot;)&#xA;    logger.info(&quot;----- End Restore From Backup -----&quot;)&#xA;    print(&quot;----- End Restore From Backup -----&quot;)&#xA;&#xA;&#xA;&#xA;exitCode = 0&#xA;try:&#xA;    logger.info(&quot;----- Starting DocuSign Backup Utility-----&quot;)&#xA;    parser = argparse.ArgumentParser(&#xA;        description=&quot;DocuSign S3 Backup Utility&quot;,&#xA;        formatter_class=argparse.RawTextHelpFormatter&#xA;    )&#xA;    parser.add_argument(&quot;--option&quot;, help=&quot;Option can have values from these three values:Backup, List, Restore. Backup is for Running DocuSign backup and upload to S3. List is for listing all paths from backup. Restore is for restoring a path from backup to a local folder. For this restore option, you need to pass path agrument with path.&quot;, default=&quot;Backup&quot;)&#xA;    parser.add_argument(&quot;--path&quot;, help=&quot;S3 prefix path for restore e.g., 2025-07-01/&quot;, default=&quot;&quot;)&#xA;    #print(f&quot;Logs will be saved in logs/docusign_backup.log file.&quot;)&#xA;    args = parser.parse_args()&#xA;&#xA;    config = load_config_from_json(r&quot;&quot;&quot;xpath:{/workflow/configuration/configJson}&quot;&quot;&quot;)&#xA;    logger.info(&quot;Config loaded from JSON string.&quot;)&#xA;    #print(f&quot;Using config: {config}&quot;)&#xA;    if not config:&#xA;        #print(f&quot;Failed to load config from JSON string. Please save configJson in the workflow configuration.&quot;)&#xA;        logger.error(f&quot;Failed to load config from JSON string. Please save configJson in the workflow configuration.&quot;)&#xA;        exitCode = 1&#xA;    else:&#xA;        bucket = config[&quot;aws&quot;][&quot;bucket&quot;]&#xA;        option = args.option&#xA;        logger.info(f&quot;Using option: {option}&quot;)&#xA;        if not option or option.lower() == &quot;backup&quot;:&#xA;            print(&quot;---Running Backup---&quot;)&#xA;            run_backup(config, bucket)&#xA;        elif option and option.lower() == &quot;list&quot;:&#xA;            print(&quot;---List Backup---&quot;)&#xA;            list_backups(config, bucket, args.path or &quot;&quot;)&#xA;        elif option and option.lower() == &quot;restore&quot;:&#xA;            if not args.path:&#xA;                logger.error(&quot;--path is required with Restore option&quot;)&#xA;                exitCode = 1&#xA;            else:&#xA;                print(&quot;---Restore From Backup---&quot;)&#xA;                restore_backup(config, bucket, args.path)&#xA;        else:&#xA;            logger.error(&quot;Invalid option provided, available options are Backup, List, Restore&quot;)&#xA;            exitCode = 1&#xA;except Exception as e:&#xA;    logger.exception(f&quot;An error occurred during the DocuSign backup utility process: {e}&quot;)&#xA;    exitCode = 1&#xA;finally:&#xA;    logger.info(&quot;----- END DocuSign Backup Utility-----&quot;)&#xA;    sys.exit(exitCode)&#xA;&lt;/script&gt;&#xA;  &lt;arguments&gt;--option xpath:{/workflow/inputs/operationType} --path &quot;xpath:{/workflow/inputs/path}&quot;&lt;/arguments&gt;&#xA;&lt;/inputs&gt;" /><onExit language="3" script="var exitcode = xpath:{/workflow/ExecuteScript_3/exitCode};&#xA;if(exitcode == 0){&#xA;&#x9;workflow.setVariable(&quot;exitCode&quot;, 0);&#xA;&#x9;workflow.setVariable(&quot;message&quot;, xpath:{/workflow/ExecuteScript_3/commandOutput});&#xA;&#xA;}else{&#xA;&#x9;workflow.setVariable(&quot;exitCode&quot;, 3);&#xA;&#x9;workflow.setVariable(&quot;message&quot;, &quot;There are some error while running docusing backup, please check docusign_backup.log for more details. Log file will be available under Commvault install dir/Log Files/ folder on the workflow engine machine.&quot;);&#xA;&#xA;}" /></Activity><Activity displayName="Break" interactive="0" originalStyle="" jobMode="0" description="interrupts a process block execution" waitSetting="0" continueOnFailure="0" namespaceUri="commvault.cte.workflow.activities" commented="0" height="35" created="1756103402678" uniqueName="Break_1" skipAttempt="0" name="Break" width="80" x="291" y="38" style="label;image=commvault.cte.workflow.activities.InterruptActivity"><inputs val="&lt;inputs/&gt;" /></Activity></superProcess><activitySchema><outputs name="outputs" /><inputs name="inputs" /></activitySchema></Activity><Activity maxRestarts="0" displayName="Process Request" interactive="0" originalStyle="" jobMode="0" description="executes a defined process block within the workflow" waitSetting="0" continueOnFailure="0" namespaceUri="commvault.cte.workflow.activities" commented="0" height="26" created="1756103634578" uniqueName="ExecuteProcessBlock_1" skipAttempt="0" name="ExecuteProcessBlock" width="111" x="422" y="121" style="label;image=commvault.cte.workflow.activities.ExecuteSuperProcess"><inputs val="&lt;inputs&gt;&#xA;  &lt;inputs/&gt;&#xA;  &lt;processBlock class=&quot;commvault.cte.workflow.dom.WorkflowElement&quot; _list_=&quot;false&quot;&gt;ProcessBlock_1&lt;/processBlock&gt;&#xA;  &lt;outputs class=&quot;commvault.cte.workflow.dom.WorkflowElement&quot; _list_=&quot;false&quot;/&gt;&#xA;&lt;/inputs&gt;" /><activitySchema><outputs name="ProcessBlock_1"><children name="Start_2" /><children name="ExecuteScript_2"><children className="java.lang.Integer" type="{http://www.w3.org/2001/XMLSchema}integer" inputType="java.lang.Integer" documentation="the exitCode recieved from executing the command" name="exitCode" /><children className="java.lang.Integer" type="{http://www.w3.org/2001/XMLSchema}integer" inputType="java.lang.Integer" documentation="the return code recieved from completion of the command" name="errorCode" /><children className="java.lang.String" type="{http://www.w3.org/2001/XMLSchema}string" inputType="java.lang.String" documentation="the output from the command or error message if it failed" name="commandOutput" /></children><children name="ExecuteScript_3"><children className="java.lang.Integer" type="{http://www.w3.org/2001/XMLSchema}integer" inputType="java.lang.Integer" documentation="the exitCode recieved from executing the command" name="exitCode" /><children className="java.lang.Integer" type="{http://www.w3.org/2001/XMLSchema}integer" inputType="java.lang.Integer" documentation="the return code recieved from completion of the command" name="errorCode" /><children className="java.lang.String" type="{http://www.w3.org/2001/XMLSchema}string" inputType="java.lang.String" documentation="the output from the command or error message if it failed" name="commandOutput" /></children><children name="Break_1" /></outputs><inputs name="inputs" /></activitySchema><transition sourceX="463" sourceY="119" activity="ReleaseLock_1" targetY="121" targetX="308" originalStyle="" description="" points="386,135" x="0" y="0" transitionIndex="0" style="defaultEdge" value="ANY" commented="0" status="0" /></Activity><Activity maxRestarts="0" displayName="Valid Inputs?" description="activity to execute code snippets in the selected language" continueOnFailure="0" namespaceUri="commvault.cte.workflow.activities" commented="0" height="15" created="1756362561606" breakpoint="0" uniqueName="Script_6" name="Script" width="92" x="27" y="119"><inputs val="&lt;inputs&gt;&#xA;  &lt;script language=&quot;3&quot; script=&quot;let optype = xpath:{/workflow/inputs/operationType};&amp;#xA;const pathPrefix = xpath:{/workflow/inputs/path};&amp;#xA;logger.info(&amp;quot;Opreation Type Provided: &amp;quot; + optype);&amp;#xA;logger.info(&amp;quot;Path Provided: &amp;quot; + pathPrefix);&amp;#xA;let error = false;&amp;#xA;if(!optype){&amp;#xA;&amp;#x9;optype = &amp;quot;backup&amp;quot;;&amp;#xA;}&amp;#xA;optype = optype.toLowerCase();&amp;#xA;if(!(optype == &amp;quot;backup&amp;quot; ||&amp;#xA;  optype == &amp;quot;list&amp;quot; ||&amp;#xA;  optype == &amp;quot;restore&amp;quot;)){&amp;#xA;  error = true;&amp;#xA;  logger.error(&amp;quot;Invalid Opreation Type Provided: &amp;quot; + optype + &amp;quot;. Valid options are Backup, List, Restore.&amp;quot;);&amp;#xA;  workflow.setVariable(&amp;quot;exitCode&amp;quot;, 1);&amp;#xA;  workflow.setVariable(&amp;quot;message&amp;quot;, &amp;quot;Invalid opreation type provided.&amp;quot;);&amp;#xA;}&amp;#xA;&amp;#xA;if(optype == &amp;quot;restore&amp;quot;){&amp;#xA;  if(!pathPrefix || pathPrefix.trim() == &amp;quot;&amp;quot;){&amp;#xA;    logger.error(&amp;quot;path is required with Restore option&amp;quot;);&amp;#xA;    error = true;&amp;#xA;    workflow.setVariable(&amp;quot;exitCode&amp;quot;, 2);&amp;#xA;    workflow.setVariable(&amp;quot;message&amp;quot;, &amp;quot;Provide path for resstore.&amp;quot;);&amp;#xA;  }&amp;#xA;}&amp;#xA;workflow.setVariable(&amp;quot;isValidInputs&amp;quot;, (error == false));&quot;/&gt;&#xA;&lt;/inputs&gt;" /><activitySchema><outputs><children className="java.lang.Object" type="{http://www.w3.org/2001/XMLSchema}anyType" inputType="java.lang.Object" name="output" /></outputs><inputs /></activitySchema><transition activity="AcquireLock_1" displayName="Yes" points="110,93" value="ANY"><condition script="xpath:{/workflow/variables/isValidInputs} == true;" /></transition><transition activity="WorkflowEnd_1" displayName="Invalid Inputs" points="64,244" value="ANY"><condition script="xpath:{/workflow/variables/isValidInputs} == false;" /></transition></Activity><formProperties css="" javaScript="" pageMode="0" formVersion="0"><rules /></formProperties><minCommCellVersion servicePack="0" releaseID="16" /></Workflow_WorkflowDefinition>